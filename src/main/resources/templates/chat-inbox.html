<!DOCTYPE html>
<html lang="bg" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>–°—ä–æ–±—â–µ–Ω–∏—è</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-black text-white min-h-screen flex flex-col relative">



<!-- Main Content -->
<div class="relative z-10 w-full max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">

  <!-- Header -->
  <div class="mb-8 flex flex-col sm:flex-row items-center justify-between gap-4">
    <a href="/" class="text-gray-400 hover:text-white transition-colors duration-200 flex items-center gap-2">
      ‚Üê –ù–∞–∑–∞–¥
    </a>
    <h1 class="text-3xl font-bold text-center sm:text-left w-full sm:w-auto">
      <span class="bg-gradient-to-r from-blue-400 via-purple-500 to-pink-500 bg-clip-text text-transparent">
        üí¨ –°—ä–æ–±—â–µ–Ω–∏—è
      </span>
    </h1>
    <div class="w-full sm:w-auto"></div>
  </div>

  <!-- Chat List -->
  <div class="space-y-4" th:if="${chatPartners != null and !chatPartners.isEmpty()}">

    <a th:each="partner : ${chatPartners}"
       th:href="@{/chat/{username}(username=${partner.username})}"
       class="block w-full bg-gray-800/30 backdrop-blur-sm border border-gray-700/50 rounded-2xl p-4 sm:p-6 hover:bg-gray-800/50 transition-all duration-300 hover:scale-[1.02]">
      <div class="flex items-center gap-4">

        <!-- Avatar Circle with image or initials -->
        <div class="w-12 h-12 sm:w-14 sm:h-14 rounded-full overflow-hidden border-2 border-gray-700 flex-shrink-0">
          <img th:if="${partner.avatarUrl != null}" th:src="@{${partner.avatarUrl}}" alt="Avatar" class="w-full h-full object-cover"/>
          <div th:if="${partner.avatarUrl == null}" class="w-full h-full bg-purple-700 flex items-center justify-center text-white font-semibold text-lg select-none"
               th:text="${partner.username.length() > 1 ? partner.username.substring(0,2) : partner.username.substring(0,1)}">
          </div>
        </div>

        <!-- Chat Info -->
        <div class="flex-1 min-w-0">
          <div class="flex flex-col sm:flex-row items-start sm:items-center justify-between mb-1 gap-1 sm:gap-0">
            <h3 class="text-lg font-semibold text-white truncate" th:text="${partner.username}">–ò–º–µ</h3>
            <div class="flex items-center gap-2">
              <span th:if="${partner.unreadMessagesCount > 0}"
                    class="bg-gradient-to-r from-blue-500 to-purple-600 text-white text-xs px-2 py-1 rounded-full font-medium"
                    th:text="${partner.unreadMessagesCount}">2</span>
              <span class="text-sm text-gray-400" th:text="${partner.lastMessageTime}">10:30</span>
            </div>
          </div>
          <p class="text-gray-400 truncate" th:text="${partner.lastMessage}">–ü–æ—Å–ª–µ–¥–Ω–æ —Å—ä–æ–±—â–µ–Ω–∏–µ</p>
        </div>

      </div>
    </a>

  </div>

  <!-- Empty State -->
  <div class="text-center py-16" th:if="${chatPartners == null or chatPartners.isEmpty()}">
    <div class="text-6xl mb-4">üí¨</div>
    <h3 class="text-xl font-semibold mb-2 text-gray-300">–ù—è–º–∞ —Å—ä–æ–±—â–µ–Ω–∏—è</h3>
    <p class="text-gray-400 mb-8 max-w-md mx-auto">–ó–∞–ø–æ—á–Ω–∏ —Ä–∞–∑–≥–æ–≤–æ—Ä —Å –¥—Ä—É–≥–∏ –ø–æ—Ç—Ä–µ–±–∏—Ç–µ–ª–∏ –∑–∞ —Å–ø–æ–¥–µ–ª–µ–Ω–∏ –ø—ä—Ç—É–≤–∞–Ω–∏—è</p>
    <a href="/trips/search"
       class="inline-block px-8 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white rounded-lg hover:from-blue-600 hover:to-purple-700 transition-all duration-200">
      –¢—ä—Ä—Å–∏ –ø—ä—Ç—É–≤–∞–Ω–∏—è
    </a>
  </div>

</div>

</body>
</html>
